{
    "controller":{
        "title":"todo"
    },
    "components":[
        {
            "id":"addField",
            "type":"TextField",
            "style":{
                "position":"`{{6,6},{${UI.screenW-80},36}}`",
                "textColor":"rgb(80,80,80)",
                "borderStyle":"none",
                "backgroundColor":"rgb(240,240,240)",
                "cornerRadius":4,
                "placeholder":"请输入项目"
            }
        },
        {
            "id":"addButton",
            "type":"Button",
            "style":{
                "position":"`{{${UI.screenW-68},4},{68,40}}`",
                "titleColor":"rgb(40,40,40)",
                "title":"add"
            },
            "click":"${()=>{$dispatch('addToDo');}}"
        },
        {
            "id":"todoList",
            "type":"ListView",
            "style":{
                "position":"`{{0,60},{${UI.screenW},${UI.screenH-60-64}}}`",
                "itemSize":"`{${UI.screenW},60}`",
                "itemVMarign":0,
                "scrollDirection":"vertical"
            },
            "itemStyle":{
                "separatorDirection":"bottom",
                "separatorColor":"rgb(240,240,240)",
                "itemHighlightColor":"rgb(220,220,220)"
            },
            "item":[
                {
                    "id":"nameLabel",
                    "type":"Label",
                    "style":{
                        "position":"`{{13,8},{${UI.screenW/2-13},20}}`",
                        "fontSize":18,
                        "textColor":"rgb(20,20,20)",
                        "adjustTextFont":1
                    }
                },
                {
                    "id":"deleteLabel",
                    "type":"Label",
                    "style":{
                        "position":"`{{13,30},{${UI.screenW/2-13},20}}`",
                        "fontSize":14,
                        "textColor":"rgb(90,90,90)",
                        "adjustTextFont":1
                    }
                },
                {
                    "id":"redDeleteLabel",
                    "type":"Label",
                    "style":{
                        "position":"`{{13,30},{${UI.screenW/2-13},20}}`",
                        "fontSize":14,
                        "textColor":"rgb(255,0,0)",
                        "adjustTextFont":1
                    }
                }
            ],
            "clickItem":"${(index)=>{$props.selectedIndex=index;$dispatch('removeToDo')}}",
            "dataArray":[
                {
                    "subStyles":[
                        {
                            "viewId":"nameLabel",
                            "style":{
                                "text":"apple22"
                            }
                        },
                        {
                            "viewId":"redDeleteLabel",
                            "style":{
                                "text":"tap to delete"
                            }
                        }
                    ]
                },
                {
                    "subStyles":[
                        {
                            "viewId":"nameLabel",
                            "style":{
                                "text":"orange"
                            }
                        },
                        {
                            "viewId":"deleteLabel",
                            "style":{
                                "text":"tap to delete"
                            }
                        }
                    ]
                }
            ]
        }],
    "props":{
        "selectedIndex":-1,
        "toDoItemStyle":{
            "subStyles":[
                {
                    "viewId":"nameLabel",
                    "style":{
                        "text":"`${$getView('addField').text}`"
                    }
                },
                {
                    "viewId":"deleteLabel",
                    "style":{
                        "text":"tap to delete"
                    }
                }
            ]
        }
    },
    "actions":{
        "removeToDo":{
            "viewId":"todoList",
            "valKey":"dataArray",
            "reduce":"${(oldVal)=>{return oldVal.removeAtIndex($props.selectedIndex);}}"
        },
        "addToDo":{
            "viewId":"todoList",
            "valKey":"dataArray",
            "reduce":"${(oldVal)=>{oldVal.push($props.getCopy('toDoItemStyle'));return oldVal;}}"
        }
    }
}